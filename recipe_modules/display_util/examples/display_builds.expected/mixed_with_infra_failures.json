[
  {
    "cmd": [],
    "name": "buildbucket.collect"
  },
  {
    "cmd": [
      "bb",
      "collect",
      "-host",
      "cr-buildbucket.appspot.com",
      "-interval",
      "60s",
      "123456789012345678",
      "987654321098765432",
      "112233445566778899",
      "199887766554433221"
    ],
    "infra_step": true,
    "name": "buildbucket.collect.wait",
    "timeout": 3600,
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "bb",
      "batch",
      "-host",
      "cr-buildbucket.appspot.com"
    ],
    "infra_step": true,
    "name": "buildbucket.collect.get",
    "stdin": "{\"requests\": [{\"getBuild\": {\"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", \"id\": \"123456789012345678\"}}, {\"getBuild\": {\"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", \"id\": \"987654321098765432\"}}, {\"getBuild\": {\"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", \"id\": \"112233445566778899\"}}, {\"getBuild\": {\"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", \"id\": \"199887766554433221\"}}]}",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"responses\": [@@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"builder\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"bucket\": \"ci\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"builder\": \"builder\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"project\": \"project\"@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createTime\": \"2018-05-25T23:50:17Z\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createdBy\": \"user:luci-scheduler@appspot.gserviceaccount.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"id\": \"123456789012345678\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"infra\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"resultdb\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"invocation\": \"invocations/build:123456789012345678\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }, @@@",
      "@@@STEP_LOG_LINE@json.output@          \"swarming\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"priority\": 30@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"input\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"gitilesCommit\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"host\": \"chromium.googlesource.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"id\": \"2d72510e447ab60a9728aeea2362d8be2cbd7789\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"project\": \"project\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"ref\": \"refs/heads/master\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"status\": \"SUCCESS\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"builder\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"bucket\": \"ci\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"builder\": \"builder\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"project\": \"project\"@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createTime\": \"2018-05-25T23:50:17Z\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createdBy\": \"user:luci-scheduler@appspot.gserviceaccount.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"id\": \"987654321098765432\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"infra\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"resultdb\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"invocation\": \"invocations/build:987654321098765432\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }, @@@",
      "@@@STEP_LOG_LINE@json.output@          \"swarming\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"priority\": 30@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"input\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"gitilesCommit\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"host\": \"chromium.googlesource.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"id\": \"2d72510e447ab60a9728aeea2362d8be2cbd7789\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"project\": \"project\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"ref\": \"refs/heads/master\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"status\": \"INFRA_FAILURE\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"summaryMarkdown\": \"something failed related to infra\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"builder\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"bucket\": \"ci\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"builder\": \"builder\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"project\": \"project\"@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createTime\": \"2018-05-25T23:50:17Z\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createdBy\": \"user:luci-scheduler@appspot.gserviceaccount.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"id\": \"112233445566778899\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"infra\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"resultdb\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"invocation\": \"invocations/build:112233445566778899\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }, @@@",
      "@@@STEP_LOG_LINE@json.output@          \"swarming\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"priority\": 30@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"input\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"gitilesCommit\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"host\": \"chromium.googlesource.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"id\": \"2d72510e447ab60a9728aeea2362d8be2cbd7789\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"project\": \"project\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"ref\": \"refs/heads/master\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"status\": \"FAILURE\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"summaryMarkdown\": \"something failed not related to infra\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"builder\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"bucket\": \"ci\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"builder\": \"builder\", @@@",
      "@@@STEP_LOG_LINE@json.output@          \"project\": \"project\"@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createTime\": \"2018-05-25T23:50:17Z\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"createdBy\": \"user:luci-scheduler@appspot.gserviceaccount.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"id\": \"199887766554433221\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"infra\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"resultdb\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"invocation\": \"invocations/build:199887766554433221\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }, @@@",
      "@@@STEP_LOG_LINE@json.output@          \"swarming\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"priority\": 30@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"input\": {@@@",
      "@@@STEP_LOG_LINE@json.output@          \"gitilesCommit\": {@@@",
      "@@@STEP_LOG_LINE@json.output@            \"host\": \"chromium.googlesource.com\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"id\": \"2d72510e447ab60a9728aeea2362d8be2cbd7789\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"project\": \"project\", @@@",
      "@@@STEP_LOG_LINE@json.output@            \"ref\": \"refs/heads/master\"@@@",
      "@@@STEP_LOG_LINE@json.output@          }@@@",
      "@@@STEP_LOG_LINE@json.output@        }, @@@",
      "@@@STEP_LOG_LINE@json.output@        \"status\": \"SCHEDULED\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  ]@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@request@{@@@",
      "@@@STEP_LOG_LINE@request@  \"requests\": [@@@",
      "@@@STEP_LOG_LINE@request@    {@@@",
      "@@@STEP_LOG_LINE@request@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@request@        \"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", @@@",
      "@@@STEP_LOG_LINE@request@        \"id\": \"123456789012345678\"@@@",
      "@@@STEP_LOG_LINE@request@      }@@@",
      "@@@STEP_LOG_LINE@request@    }, @@@",
      "@@@STEP_LOG_LINE@request@    {@@@",
      "@@@STEP_LOG_LINE@request@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@request@        \"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", @@@",
      "@@@STEP_LOG_LINE@request@        \"id\": \"987654321098765432\"@@@",
      "@@@STEP_LOG_LINE@request@      }@@@",
      "@@@STEP_LOG_LINE@request@    }, @@@",
      "@@@STEP_LOG_LINE@request@    {@@@",
      "@@@STEP_LOG_LINE@request@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@request@        \"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", @@@",
      "@@@STEP_LOG_LINE@request@        \"id\": \"112233445566778899\"@@@",
      "@@@STEP_LOG_LINE@request@      }@@@",
      "@@@STEP_LOG_LINE@request@    }, @@@",
      "@@@STEP_LOG_LINE@request@    {@@@",
      "@@@STEP_LOG_LINE@request@      \"getBuild\": {@@@",
      "@@@STEP_LOG_LINE@request@        \"fields\": \"builder,createTime,createdBy,critical,endTime,id,input,number,output,startTime,status,updateTime\", @@@",
      "@@@STEP_LOG_LINE@request@        \"id\": \"199887766554433221\"@@@",
      "@@@STEP_LOG_LINE@request@      }@@@",
      "@@@STEP_LOG_LINE@request@    }@@@",
      "@@@STEP_LOG_LINE@request@  ]@@@",
      "@@@STEP_LOG_LINE@request@}@@@",
      "@@@STEP_LOG_END@request@@@",
      "@@@STEP_LINK@123456789012345678@https://cr-buildbucket.appspot.com/build/123456789012345678@@@",
      "@@@STEP_LINK@987654321098765432@https://cr-buildbucket.appspot.com/build/987654321098765432@@@",
      "@@@STEP_LINK@112233445566778899@https://cr-buildbucket.appspot.com/build/112233445566778899@@@",
      "@@@STEP_LINK@199887766554433221@https://cr-buildbucket.appspot.com/build/199887766554433221@@@"
    ]
  },
  {
    "cmd": [],
    "name": "display builds",
    "~followup_annotations": [
      "@@@STEP_EXCEPTION@@@"
    ]
  },
  {
    "cmd": [],
    "name": "display builds.builder",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LINK@123456789012345678@https://cr-buildbucket.appspot.com/build/123456789012345678@@@"
    ]
  },
  {
    "cmd": [],
    "name": "display builds.builder (2)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LINK@199887766554433221@https://cr-buildbucket.appspot.com/build/199887766554433221@@@",
      "@@@STEP_WARNINGS@@@"
    ]
  },
  {
    "cmd": [],
    "name": "display builds.builder (3)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LINK@112233445566778899@https://cr-buildbucket.appspot.com/build/112233445566778899@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "cmd": [],
    "name": "display builds.builder (4)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LINK@987654321098765432@https://cr-buildbucket.appspot.com/build/987654321098765432@@@",
      "@@@STEP_EXCEPTION@@@"
    ]
  },
  {
    "failure": {
      "humanReason": "2 builds failed:\n\n[builder](https://cr-buildbucket.appspot.com/build/987654321098765432) (infra failure):\n\nsomething failed related to infra\n\n[builder](https://cr-buildbucket.appspot.com/build/112233445566778899):\n\nsomething failed not related to infra"
    },
    "name": "$result"
  }
]